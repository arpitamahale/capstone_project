<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FixMate - Services</title>

    <!-- React and Babel CDNs -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Link your style.css -->
    <link rel="stylesheet" href="../static/style.css">
</head>
<body>

    <!-- This div MUST exist for React to work -->
    <div id="root"></div>

    <script type="text/babel">
    {% raw %}
        const { useState, useEffect } = React;

        // --- SUB-COMPONENT: AUTH PAGE ---
        function AuthPage({ onGoBack }) {
            return (
                <main className="container">
                    <div style={{textAlign: 'center', padding: '50px'}}>
                        <h2>Login / Sign Up</h2>
                        <button className="add-to-cart-button" style={{width: '200px'}} onClick={onGoBack}>Back to Home</button>
                    </div>
                </main>
            );
        }

        // --- SUB-COMPONENT: PLUMBER PAGE ---
        function PlumberPage({ onGoBack, addToCart, cart }) {
            const plumberServices = [
    // Bath fittings category
    { id: 'p1', category: 'Bath fittings', name: 'Bath accessory installation', price: 69, duration: '30 mins', rating: 4.74, reviews: '11K', description: 'Small fittings such as towel hanger/shelves, soap dispenser, etc.', image: 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?q=80&w=400' },
    { id: 'p2', category: 'Bath fittings', name: 'Shower installation', price: 89, duration: '45 mins', rating: 4.82, reviews: '14K', description: 'Applicable for wall-mounted & handheld shower.', image: 'https://images.unsplash.com/photo-1620629761511-fb099b416cdd?q=80&w=400' },

    // Basin & sink category
    { id: 'p3', category: 'Basin & sink', name: 'Sink drainage removal', price: 119, duration: '20 mins', rating: 4.6, reviews: '5K', description: 'Removal of old/damaged sink coupling and waste pipe.', image: 'https://images.unsplash.com/photo-1595515106969-1ce29566ff1c?q=80&w=400' },
    { id: 'p4', category: 'Basin & sink', name: 'Basin installation', price: 249, duration: '60 mins', rating: 4.5, reviews: '8K', description: 'Installation of wash basin and connection to drainage.', image: 'https://images.unsplash.com/photo-1521207418485-99c705420785?q=80&w=400' },

    // Toilet category
    { id: 'p5', category: 'Toilet', name: 'Toilet seat replacement', price: 150, duration: '30 mins', rating: 4.9, reviews: '20K', description: 'Installation of new toilet seat cover.', image: 'https://images.unsplash.com/photo-1585704032915-c3400ca1f963?q=80&w=400' },
];

const sidebarIcons = [
    { name: 'Bath fittings', icon: 'üöø' },
    { name: 'Basin & sink', icon: 'üö∞' },
    { name: 'Grouting', icon: 'üß±' },
    { name: 'Water filter', icon: 'üíß' },
    { name: 'Drainage', icon: 'üõÄ' },
    { name: 'Toilet', icon: 'üöΩ' },
    { name: 'Tap & mixer', icon: 'üõ†Ô∏è' }
];
            return (
                <main className="plumber-page-grid">
                    <div className="plumber-services-list">
                        <p style={{cursor:'pointer', color:'#673ab7', fontWeight:'bold'}} onClick={onGoBack}>‚Üê Back</p>
                        <h3>Plumbing Services</h3>
                        {plumberServices.map(s => (
                            <div key={s.id} className={`plumber-service-list-item ${selectedService.id === s.id ? 'selected' : ''}`} onClick={() => setSelectedService(s)}>
                                {s.name}
                            </div>
                        ))}
                    </div>
                    <div className="plumber-service-details">
                        <img src={selectedService.image} style={{width:'100%', borderRadius:'8px'}} />
                        <h3>{selectedService.name}</h3>
                        <p>Price: ${selectedService.price} | Rating: {selectedService.rating}‚≠ê</p>
                        <button className="add-to-cart-button" onClick={() => addToCart(selectedService)}>Add to Cart</button>
                    </div>
                    <div className="plumber-cart-summary">
                        <h3>Cart ({cart.length})</h3>
                        {cart.length === 0 ? <p>No items</p> : cart.map((item, i) => <div key={i}>{item.name}</div>)}
                    </div>
                </main>
            );
        }

        // --- MAIN APP COMPONENT ---
        function App() {
            const [view, setView] = useState('home');
            const [theme, setTheme] = useState('light');
            const [cart, setCart] = useState([]);

            // THE 10 SERVICES LIST
            const servicesList = [
                { name: "Plumber", icon: "üîß", tag: "plumber" },
                { name: "AC Repair", icon: "‚ùÑÔ∏è", tag: "ac" },
                { name: "Sweeping", icon: "üßπ", tag: "sweep" },
                { name: "Electrician", icon: "üí°", tag: "elec" },
                { name: "Carpenter", icon: "ü™ö", tag: "carp" },
                { name: "Car Wash", icon: "üöó", tag: "car" },
                { name: "Washing", icon: "üßΩ", tag: "wash" },
                { name: "Cooking", icon: "üçΩÔ∏è", tag: "cook" },
                { name: "Women's Salon", icon: "üíÑ", tag: "wsalon" },
                { name: "Men's Salon", icon: "‚úÇÔ∏è", tag: "msalon" }
            ];

            useEffect(() => {
                if (theme === 'dark') document.body.classList.add('dark-mode');
                else document.body.classList.remove('dark-mode');
            }, [theme]);

            const addToCart = (item) => setCart([...cart, item]);

            const handleServiceClick = (tag) => {
                if (tag === 'plumber') setView('plumber');
                else alert(tag + " service coming soon!");
            };

            return (
                <div className="App">
                    <nav className="navbar">
                        <div className="logo" onClick={() => setView('home')}>FixMate</div>
                        <ul className="nav-links">
                            <li onClick={() => setView('home')}>Home</li>
                            <li onClick={() => setView('auth')}>Login / Sign Up</li>
                            <li onClick={() => setTheme(theme === 'light' ? 'dark' : 'light')} style={{cursor:'pointer'}}>
                                {theme === 'light' ? 'üåô' : '‚òÄÔ∏è'}
                            </li>
                        </ul>
                    </nav>

                    {view === 'home' ? (
                        <main>
                            <header className="hero">
                                <h1>FixMate services, on demand.</h1>
                                <div className="search-box">
                                    <input type="text" placeholder="Search for services..." />
                                    <button>Search</button>
                                </div>
                            </header>
                            <section className="container">
                                <h2>Services</h2>
                                <div className="services-grid">
                                    {servicesList.map((s, index) => (
                                        <div key={index} className="card" onClick={() => handleServiceClick(s.tag)}>
                                            <span>{s.icon}</span> {s.name}
                                        </div>
                                    ))}
                                </div>
                            </section>
                        </main>
                    ) : view === 'auth' ? (
                        <AuthPage onGoBack={() => setView('home')} />
                    ) : (
                        <PlumberPage onGoBack={() => setView('home')} addToCart={addToCart} cart={cart} />
                    )}

                    <footer>
                        <p>¬© 2024 FixMate Clone</p>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    {% endraw %}
    </script>
</body>
</html>